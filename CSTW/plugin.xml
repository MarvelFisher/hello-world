<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         id="application"
         point="org.eclipse.core.runtime.applications">
      <application
            icon="icons/Leaves16.png">
         <run
               class="com.cyanspring.cstw.gui.Application">
         </run>
      </application>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="com.cyanspring.cstw.gui.Perspective"
            icon="icons/Leaves16.png"
            id="CSTW.perspective"
            name="Perspective">
      </perspective>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            allowMultiple="true"
            class="com.cyanspring.cstw.ui.views.SingleOrderStrategyView"
            icon="icons/order.png"
            id="com.cyanspring.cstw.gui.ParentOrderView"
            name="Single Order Strategy"
            restorable="true">
      </view>
      <view
            class="com.cyanspring.cstw.ui.views.ChildOrderView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.ChildOrderView"
            name="Child Orders"
            restorable="true">
      </view>
      <view
            class="com.cyanspring.cstw.ui.views.PropertyView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.PropertyView"
            name="Strategy Properties"
            restorable="true">
      </view>
      <view
            class="com.cyanspring.cstw.ui.views.MarketDataView"
            icon="icons/marketData.png"
            id="com.cyanspring.cstw.gui.MarketDataView"
            name="Market Data">
      </view>
      <view
            class="com.cyanspring.cstw.ui.views.StrategyLogView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.StrategyLogView"
            name="Strategy Log">
      </view>
      <view
            class="com.cyanspring.cstw.ui.views.ExecutionView"
            icon="icons/executions.png"
            id="com.cyanspring.cstw.gui.ExecutionView"
            name="Executions"
            restorable="true">
      </view>
      <view
            class="com.cyanspring.cstw.ui.views.MultiInstrumentStrategyView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.MultiInstrumentStrategyView"
            name="Multi Instrument Strategy"
            restorable="true">
      </view>
      <view
            class="com.cyanspring.cstw.ui.views.SingleInstrumentStrategyView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.SingleInstrumentStrategyView"
            name="Single Instrument Strategy"
            restorable="true">
      </view>
      <view
            class="com.cyanspring.cstw.ui.views.SignalView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.SignalView"
            name="Watch list"
            restorable="true">
      </view>
      <view
            class="com.cyanspring.cstw.ui.views.PositionView"
            icon="icons/account.png"
            id="com.cyanspring.cstw.gui.PositionViewer"
            name="Account"
            restorable="true">
      </view>
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.AccountView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.AccountViewer"
            name="Account View"
            restorable="true">
      </view>
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.AccountSettingView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.AccountSettingViewer"
            name="Account Setting View"
            restorable="true">
      </view>
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.PositionStatisticView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.PositionStatisticView"
            name="Open Position"
            restorable="true">
      </view>
      
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.ClosedPositionView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.ClosedPositionViewer"
            name="Closed Position"
            restorable="true">
      </view>
      
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.AccountStatisticView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.AccountStatisticViewer"
            name="Account Statistic"
            restorable="true">
      </view>
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.UserView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.gui.UserViewer"
            name="User View"
            restorable="true">
      </view>
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.QuoteView"
            icon="icons/quote.png"
            id="com.cyanspring.cstw.gui.QuoteViewer"
            name="Quote"
            restorable="true">
      </view>
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.TraderPropertyView"
            icon="icons/property.png"
            id="com.cyanspring.cstw.trader.gui.TraderPropertyViewer"
            name="Properties"
            restorable="true">
      </view>    
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.KDBInfoView"
            icon="icons/active.png"
            id="com.cyanspring.cstw.kdb.gui.KDBInfoViewer"
            name="Signal"
            restorable="true">
      </view>
      <view
            allowMultiple="true"
            class="com.cyanspring.cstw.ui.views.SpeedDepthViewPart"
            icon="icons/order.png"
            id="com.cyanspring.cstw.trader.gui.SpeedDepthViewPart"
            name="SpeedDepthView"
            restorable="true">
      </view>
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.RWInfoView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.ui.rw.views.RWInfoView"
            name="RW Info"
            restorable="true">
      </view>
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.RWOrderView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.ui.rw.views.RWOrderView"
            name="RW Order"
            restorable="true">
      </view>
      <view
            allowMultiple="false"
            class="com.cyanspring.cstw.ui.views.BWInfoView"
            icon="icons/Leaves16.png"
            id="com.cyanspring.cstw.ui.bw.views.BWInfoView"
            name="BW Info"
            restorable="true">
      </view>        
   </extension>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="CSTW.perspective">
         <view
               closeable="false"
               id="com.cyanspring.cstw.gui.StrategyLogView"
               minimized="false"
               relationship="stack">
         </view>
      </perspectiveExtension>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:org.eclipse.ui.main.menu">
         <menu
               label="File">
            <command
                  commandId="CSTW.LoadStrategyCommand"
                  label="Load strategy"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <or>
                     <with
                           variable="Admin">
                        <equals
                              value="ENABLED">
                        </equals>
                     </with>
                  </or>
               </visibleWhen>
            </command>
            <command
                  commandId="org.eclipse.ui.file.exit"
                  label="Exit">
               <visibleWhen
                     checkEnabled="false">
                  <or>
                     <with
                           variable="Admin">
                        <equals
                              value="ENABLED">
                        </equals>
                     </with>
                  </or>
               </visibleWhen>
            </command>
         </menu>
         <menu
               label="Windows">
            <command
                  commandId="CSTW.SingleInstrumentStrategyView"
                  label="Single Instrument Strategy"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.MultiOrderStrategyView"
                  label="Multi Instrument Strategy"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.ParentOrderView"
                  icon="icons/order.png"
                  label="Single Order Strategy"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
		               <with variable="Trader">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.OrderPropertyView"
                  label="Strategy Properties"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.ChildOrderView"
                  label="Child Orders"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.StrategyLogView"
                  label="Strategy Logs"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.ExecutionView"
                  icon="icons/executions.png"
                  label="Executions"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
		               <with variable="Trader">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.AccountView"
                  label="Accounts"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.AccountSettingView"
                  label="Account Settings"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.PositionView"
                  icon="icons/account.png"
                  label="Account"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
		               <with variable="Trader">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>      	  
            </command>
            <command
                  commandId="CSTW.MarketDataView"
                  icon="icons/marketData.png"
                  label="Market Data"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
		               <with variable="Trader">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.SignalView"
                  label="Watch list"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.PositionStatisticView"
                  label="Open Position"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.ClosedPositionView"
                  label="Closed Position"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.AccountStatisticView"
                  label="Account Statistic"
                  style="push">
                  <visibleWhen checkEnabled="false">
                  	<or>
                  	   <with variable="Admin">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>       
            </command>
            <command
                  commandId="CSTW.QuoteView"
                  icon="icons/quote.png"
                  label="Quote"
                  style="push">
                     <visibleWhen checkEnabled="false">
	                  	<or>
	                  	   <with variable="Admin">
			                  <equals value="ENABLED"></equals>        
			               </with>
		                   <with variable="Trader">
		                      <equals value="ENABLED"></equals>        
		                   </with>
	                  	</or>
            	  	 </visibleWhen>
            </command>
            <command
                  commandId="CSTW.TraderPropertyView"
                  icon="icons/property.png"
                  label="Properties"
                  style="push">
                     <visibleWhen checkEnabled="false">
	                  	<or>
		                   <with variable="Trader">
		                      <equals value="ENABLED"></equals>        
		                   </with>
	                  	</or>
            	  	 </visibleWhen>
            </command>
            <command
                  commandId="CSTW.KDBInfoView"
                  icon="icons/active.png"
                  label="Signal"
                  style="push">
                     <visibleWhen checkEnabled="false">
	                  	<or>
	                  	   <with variable="Admin">
			                  <equals value="ENABLED"></equals>        
			               </with>
	                  	</or>
            	  	 </visibleWhen>
            </command>
            <menu
                  label="New">
               <command
                     commandId="CSTW.new.ParentOrderView"
                     label="Single Order Strategy"
                     style="push">
                     <visibleWhen checkEnabled="false">
	                  	<or>
	                  	   <with variable="Admin">
			                  <equals value="ENABLED"></equals>        
			               </with>
	                  	</or>
            	  </visibleWhen>
               </command>
            </menu>
            <menu
                  label="User Management">
               <command
                     commandId="CSTW.usermanagement.UserView"
                     label="Users"
                     style="push">
                     <visibleWhen checkEnabled="false">
	                  	<or>
	                  	   <with variable="Admin">
			                  <equals value="ENABLED"></equals>        
			               </with>
	                  	</or>
            	  	 </visibleWhen>
               </command>
            </menu>
            <command
                  commandId="CSTW.SpeedDepth"
                  icon="icons/order.png"
                  label="SpeedDepth"
                  style="push">
                   <visibleWhen checkEnabled="false">
                  	<or>
		               <with variable="Trader">
		                  <equals value="ENABLED"></equals>        
		               </with>
                  	</or>
            	  </visibleWhen>
            </command>
            <command
                  commandId="CSTW.FrontRiskManager.Data"
                  label="RW Manager Data"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <or>
                     <with
                           variable="RiskManager">
                        <equals
                              value="ENABLED">
                        </equals>
                     </with>
                  </or>
               </visibleWhen>
            </command>
            <command
                  commandId="CSTW.FrontRiskManager.OrderData"
                  label="RW Order Data"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <or>
                     <with
                           variable="RiskManager">
                        <equals
                              value="ENABLED">
                        </equals>
                     </with>
                  </or>
               </visibleWhen>
            </command>
            <command
                  commandId="CSTW.BackRiskManager.Data"
                  label="BW Manager Data"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <or>
                     <with
                           variable="BackEndRiskManager">
                        <equals
                              value="ENABLED">
                        </equals>
                     </with>
                  </or>
               </visibleWhen>
            </command>
         </menu>
      </menuContribution>
   </extension>
   <extension
         id="product"
         point="org.eclipse.core.runtime.products">
      <product
            application="com.cyanspring.cstw.application"
            name="LTW">
         <property
               name="appName"
               value="LTW">
         </property>
         <property
               name="windowImages"
               value="icons/appIcon16.png,icons/appIcon32.png,icons/appIcon48.png,icons/appIcon64.png,icons/appIcon128.png">
         </property>

      </product>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.NewSingleOrderStrategyViewCommand"
            description="Create a new single order strategy view"
            id="CSTW.new.ParentOrderView"
            name="Parent Order View">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.PropertyViewCommand"
            description="Show strategy property window"
            id="CSTW.OrderPropertyView"
            name="Properties">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.SingleOrderStrategyViewCommand"
            description="Show primary single order strategy view"
            id="CSTW.ParentOrderView"
            name="Single Order Strategies">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.ChildOrderViewCommand"
            description="Show child orders"
            id="CSTW.ChildOrderView"
            name="Child Orders">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.StrategyLogViewCommand"
            description="Show strategy logs"
            id="CSTW.StrategyLogView"
            name="Strategy Logs">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.MultiInstrumentStrategyViewCommand"
            description="Show multi-instrument strategies"
            id="CSTW.MultiOrderStrategyView"
            name="Multi-instrument Strategies">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.LoadStrategyCommand"
            description="Load a strategy from xml file"
            id="CSTW.LoadStrategyCommand"
            name="Load strategy">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.ExecutionViewCommand"
            description="Show executions"
            id="CSTW.ExecutionView"
            name="Executions">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.MarketDataViewCommand"
            description="Show market depth"
            id="CSTW.MarketDataView"
            name="Market Depth">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.SingleInstrumentStrategyViewCommand"
            description="Show single instrument strategy view"
            id="CSTW.SingleInstrumentStrategyView"
            name="Single Instrument Strategy">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.SignalViewCommand"
            description="Show watch view"
            id="CSTW.SignalView"
            name="Watch view">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.PositionViewCommand"
            description="Account positions"
            id="CSTW.PositionView"
            name="Account Positions">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.AccountViewCommand"
            description="Accounts"
            id="CSTW.AccountView"
            name="Accounts">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.AccountSettingViewCommand"
            description="Account Settings"
            id="CSTW.AccountSettingView"
            name="Account Settings">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.PositionStatisticViewCommand"
            description="Position Statistic"
            id="CSTW.PositionStatisticView"
            name="Open Position">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.ClosedPositionViewCommand"
            description="Closed Position"
            id="CSTW.ClosedPositionView"
            name="Closed Position">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.AccountStatisticViewCommand"
            description="Account Statistic"
            id="CSTW.AccountStatisticView"
            name="Account Statistic">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.UserViewCommand"
            description="Users"
            id="CSTW.usermanagement.UserView"
            name="Users">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.gui.command.QuoteViewCommand"
            description="Quote"
            id="CSTW.QuoteView"
            name="Quote">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.ui.trader.command.TraderPropertyViewCommand"
            description="Trader Property"
            id="CSTW.TraderPropertyView"
            name="Properties">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.ui.kdb.command.KDBInfoViewCommand"
            description="Signal"
            id="CSTW.KDBInfoView"
            name="Signal">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.ui.trader.command.TraderSpeedDepthViewCommand"
            id="CSTW.SpeedDepth"
            name="SpeedDepth">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.ui.rw.command.RWInfoViewCommand"
            id="CSTW.FrontRiskManager.Data"
            name="FrontRiskManager Data">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.ui.rw.command.RWOrderViewCommand"
            id="CSTW.FrontRiskManager.OrderData"
            name="FrontRisk Order Data">
      </command>
      <command
            defaultHandler="com.cyanspring.cstw.ui.bw.command.BWInfoViewCommand"
            id="CSTW.BackRiskManager.Data"
            name="BackRiskManager Data">
      </command>      
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="com.cyanspring.cstw.gui.command.auth.AuthProvider">
         <variable
               name="Admin"
               priorityLevel="workbench">
         </variable>
         <variable
               name="RiskManager"
               priorityLevel="workbench">
         </variable>
          <variable
               name="BackEndRiskManager"
               priorityLevel="workbench">
         </variable>
         <variable
               name="Trader"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>

</plugin>
